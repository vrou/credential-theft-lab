<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="None">
  
  <link rel="shortcut icon" href="./img/favicon.ico">
  <title>Overview - Credential Theft Lab</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="./css/theme.css" type="text/css" />
  <link rel="stylesheet" href="./css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="./css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Overview";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = "/";
  </script>
  
  <script src="./js/jquery-2.1.1.min.js"></script>
  <script src="./js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="./js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> Credential Theft Lab</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1 current">
		
    <a class="current" href=".">Overview</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#background">Background</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#credential-phishing-prevention">Credential Phishing Prevention</a></li>
        
            <li><a class="toctree-l3" href="#multi-factor-authentication">Multi-Factor Authentication</a></li>
        
        </ul>
    

    <li class="toctree-l2"><a href="#lab-diagram">Lab Diagram</a></li>
    

    <li class="toctree-l2"><a href="#access-details">Access Details</a></li>
    

    <li class="toctree-l2"><a href="#controlling-aws-costs">Controlling AWS Costs</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="gettingstarted/">Getting Started</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="priorconfiguration/">What's Been Done For You</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="credentialphishing/">Credential Phishing Prevention</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="mfa/">Multi-Factor Authentication</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="troubleshooting/">Troubleshooting</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">Credential Theft Lab</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>Overview</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1>Credential Theft Lab</h1>

<h2 id="background">Background</h2>
<p>Phishing attacks to obtain valid corporate credentials are one of the common 
factors in many breaches today.  If the attacker can obtain valid credentials,
they can walk right into the enterprise network bypassing most security solutions and not arouse any suspicions.</p>
<p>In this lab, we will see how we can use Credential Phishing Prevention and Multi-Factor Authentication to prevent 
exposure and abuse of corporate credentials. These new capabilities were added in PAN-OS 8.0.</p>
<h3 id="credential-phishing-prevention">Credential Phishing Prevention</h3>
<p>Attackers use phishing sites disguised as legitimate ones with the aim to steal user information, especially the user credentials that provide access to corporate networks. When a phishing email enters a network, it takes just a single user to click the link and enter credentials to set a breach in motion. You can now identify and prevent in-progress phishing attacks by controlling sites to which users can submit corporate credentials based on the site’s URL category (as part of URL Filtering, starting from PAN-OS 8.0). This allows you to block users from submitting credentials to untrusted sites while allowing users to continue to submit credentials to corporate and sanctioned sites.
Credential phishing prevention works by scanning username and password submissions to websites and comparing those submissions against valid corporate credentials. You can choose what websites you want to either allow, alert on, or block corporate credential submissions to based on the URL category of the website. Alternatively, you can present a page that warns users against submitting credentials to sites classified in certain URL categories. This gives you the opportunity to educate users against reusing corporate credentials, even on legitimate, non-phishing sites. In the event that corporate credentials are compromised, this feature allows you to identify the user who submitted credentials so that you can remediate.</p>
<h3 id="multi-factor-authentication">Multi-Factor Authentication</h3>
<p>To protect services and applications from attackers, you can use the PAN-OS Authentication Policy to control access for end users. Authentication Policy provides the benefit of letting you to choose how many authentication challenges of different types (factors) users must respond to. Using multiple factors of authentication (MFA) is particularly useful for protecting your most sensitive services and applications. For example, you can force users to enter a login password and then enter a verification code that they receive by phone before accessing critical financial documents. To reduce the frequency of MFA challenges that interrupt the user workflow, you can specify an authentication timeout period during which a user responds to the challenges only once for repeated access to services and applications.
The MFA factors that the firewall supports include Push, Short Message Service (SMS), Voice, and One-time password (OTP) authentication. The firewall integrates with MFA vendors through APIs — The supported vendors are currently Duo, Okta, PingID and RSA.</p>
<p><img alt="Authentication Policy" src="./img/overview/authentication_policy.png" /></p>
<p>In the example depicted above, when a user on workstation "W10" tries to access the internal corporate Git repository, via either HTTP, HTTPS or SSH, the Next-Generation Firewall will block the traffic until a Multi-Factor authentication is performed by the user. When the request is fulfilled through a browser, the Authentication Policy will redirect the user to a Portal where he or she will provide login and password (First Factor) and, if successful, the Firewall will invoke third party vendors APIs to complete the second (and optionally third, fourth, etc.) factor(s) authentication. If the connection is not browser-based (i.e. a SSH session), it will be blocked by NGFW: the user must login (and perform MFA) to the Authentication Portal first. if the user has the GlobalProtect Client installed on the workstation, a pop-up message will automatically display a notification and provide a link to the Authentication Portal.</p>
<h2 id="lab-diagram">Lab Diagram</h2>
<p>You will instantiate an AWS CloudFormation template that builds the below
environment.  It will create the VPC, subnets, security groups, and instances
shown.  You will then connect into the environment using the GlobalProtect client.</p>
<p><img alt="Lab Diagram" src="./img/overview/lab_diagram.png" /></p>
<h2 id="access-details">Access Details</h2>
<p>You will need this information throughout the lab.</p>
<p><strong><em>Table 1</em> - Lab Instances</strong></p>
<table>
<thead>
<tr>
<th>Device</th>
<th>IP</th>
<th>Username</th>
<th>Password</th>
</tr>
</thead>
<tbody>
<tr>
<td>Firewall</td>
<td><em>Set by CloudFormation</em></td>
<td>admin</td>
<td><em>Set by user</em></td>
</tr>
<tr>
<td>Domain Controller</td>
<td>10.0.1.10</td>
<td>Administrator</td>
<td>paloalto</td>
</tr>
<tr>
<td>Read Only Domain Controller</td>
<td>10.0.1.11</td>
<td>Administrator</td>
<td>paloalto</td>
</tr>
<tr>
<td>Web Server</td>
<td>10.0.1.12</td>
<td>Administrator</td>
<td>paloalto</td>
</tr>
<tr>
<td>Phishing Site (Ubuntu Linux)</td>
<td>10.0.2.10</td>
<td>ubuntu</td>
<td>paloalto</td>
</tr>
</tbody>
</table>
<p><strong><em>Table 2</em> - Corporate Active Directory Accounts - Credlab.local</strong></p>
<table>
<thead>
<tr>
<th>Username</th>
<th>Password</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Administrator</td>
<td>paloalto</td>
<td><em>For lab maintenance only, use user accounts for testing</em></td>
</tr>
<tr>
<td>user1</td>
<td>paloalto</td>
<td></td>
</tr>
<tr>
<td>user2</td>
<td>paloalto</td>
<td></td>
</tr>
<tr>
<td>user3</td>
<td>paloalto</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="controlling-aws-costs">Controlling AWS Costs</h2>
<p>In addition to building the lab environment, the CloudFormation template also creates a Lambda
function triggered by a CloudWatch Event Rule to automatically power off the instances at 05:00 GMT
each day.</p>
<p>To change this behavior, change the tag <strong>credential-theft-lab:autopoweroff</strong> to false on the
instances you do not want shut down.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gettingstarted/" class="btn btn-neutral float-right" title="Getting Started">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
        <span style="margin-left: 15px"><a href="gettingstarted/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '.';</script>
    <script src="./js/theme.js"></script>
      <script src="./search/require.js"></script>
      <script src="./search/search.js"></script>

</body>
</html>

<!--
MkDocs version : 0.17.1
Build Date UTC : 2018-04-05 20:24:59
-->
